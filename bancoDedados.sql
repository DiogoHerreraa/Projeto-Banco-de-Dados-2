/*PROJETO BANCO DE DADOS 2*/


/*CRIAÇÃO E USO DO BANCO*/
CREATE DATABASE LOJA_ELETRONICOS;
USE LOJA_ELETRONICOS;

/*CASO QUERIA APAGAR O BANCO DE DADO0S*/

DROP DATABASE LOJA_ELETRONICOS

CREATE TABLE CLIENTE_PADRAO(

ID_CPADRAO INT PRIMARY KEY AUTO_INCREMENT,
NOME_CPADRAO VARCHAR(50) NOT NULL,
SEXO ENUM('M','F','O') NOT NULL,
IDADE INT,
NASCIMENTO DATE
);

/*INSERT'S DA TABELA CLIENTE PADRAO ( DADOS ALEATORIOS )*/
INSERT INTO CLIENTE_PADRAO VALUES(NULL,'ANTONIO CASTELÃO','M',24,'2001-05-10');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'DIOGO', 'M', 21, '2003-08-14');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'ANDERSON NEIFF', 'M', 21, '2003-05-12');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'FELIPE MORAES', 'M', 21, '2003-01-10');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'FERNANDA', 'F', 26, '1976-12-24');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'LARISSA', 'F', 43, '1981-03-08');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'FELIPE', 'M', 27, '1954-08-05');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'GABRIELA', 'F', 27, '1959-06-09');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'RAFAEL', 'M', 53, '1996-06-15');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'NEDSON', 'M', 21, '2003-08-23');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'RODRIGO', 'M', 33, '2005-04-06');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'JOANA', 'F', 76, '1952-09-17');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'BRUNO', 'O', 74, '1970-07-24');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'DANIELA', 'F', 56, '1990-04-28');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'FELIPE', 'M', 55, '1966-08-16');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'PRISCILA', 'F', 79, '1950-01-04');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'DIEGO', 'M', 30, '1971-06-20');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'BEATRIZ', 'F', 45, '1961-01-09');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'DIEGO', 'M', 34, '1988-08-27');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'KARLA', 'F', 68, '1956-06-26');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'VINICIUS', 'M', 42, '1991-06-23');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'JOANA', 'F', 60, '1966-10-01');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'FERNANDO', 'M', 41, '1983-03-03');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'NATHALIA', 'F', 31, '1976-07-01');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'MAURICIO', 'M', 50, '1991-11-27');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'MARCIA', 'F', 58, '1957-09-22');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'ANDRÉ', 'M', 77, '1971-07-09');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'SABRINA', 'F', 65, '1976-09-02');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'FELIPE', 'M', 32, '1975-04-30');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'YARA', 'F', 28, '1972-02-14');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'LEONARDO', 'M', 53, '1962-12-29');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'WILLIAM', 'M', 33, '1998-11-03');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'XIMENA', 'F', 55, '1999-05-10');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'PAULA', 'F', 46, '1971-04-17');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'MATEUS', 'M', 79, '1985-09-15');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'CAMILA', 'F', 45, '1991-10-05');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'LUIZ', 'O', 64, '1973-05-25');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'ANA', 'F', 31, '1963-02-04');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'DANIEL', 'M', 75, '1972-06-04');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'SANDRA', 'F', 61, '1957-07-20');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'CAIO', 'M', 54, '1970-03-19');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'BRUNA', 'F', 76, '1960-08-21');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'ANTONIO', 'M', 64, '1966-02-17');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'JAQUELINE', 'F', 37, '1973-08-12');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'JORGE', 'M', 56, '1995-10-09');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'CARLA', 'F', 71, '1990-05-05');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'GUSTAVO', 'M', 23, '1980-01-06');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'HELENA', 'F', 21, '1993-03-29');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'RAIMUNDO', 'M', 50, '1959-12-02');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'DAVI', 'O', 27, '2003-07-17');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'ALINE', 'F', 43, '1997-08-04');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'ANDRÉ', 'M', 38, '1964-09-19');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'DANIEL', 'M', 52, '1965-11-28');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'MIRELA', 'F', 42, '1992-04-10');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'ERNESTO', 'O', 74, '1984-08-31');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'ANA', 'F', 46, '1983-10-16');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'GUSTAVO', 'M', 79, '1976-10-30');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'YARA', 'F', 28, '1961-11-21');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'FÁBIO', 'M', 22, '1990-06-13');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'GABRIELA', 'F', 36, '1995-12-01');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'OSVALDO', 'M', 38, '1987-10-27');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'VIVIANE', 'F', 36, '1988-09-04');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'PAULO', 'M', 26, '1972-03-25');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'XIMENA', 'F', 21, '1980-12-30');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'WILLIAM', 'O', 32, '1953-01-05');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'MARCIA', 'F', 65, '1998-01-24');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'VINICIUS', 'M', 45, '1994-04-14');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'PATRICIA', 'F', 24, '1997-03-16');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'TIAGO', 'M', 70, '1972-12-07');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'RAQUEL', 'F', 49, '1961-08-08');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'MURILO', 'M', 40, '1985-09-06');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'JOANA', 'O', 68, '1979-04-22');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'HENRIQUE', 'M', 28, '1980-03-10');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'HELENA', 'F', 43, '1991-07-29');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'LUIZ', 'M', 62, '1990-02-12');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'NATHALIA', 'F', 61, '1999-10-01');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'RAFAEL', 'M', 37, '1957-06-06');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'TATIANA', 'F', 34, '2003-09-09');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'RODRIGO', 'M', 76, '1964-01-01');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'ZILDA', 'F', 53, '1989-06-21');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'LEONARDO', 'M', 32, '1969-04-06');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'LARISSA', 'F', 34, '1996-05-03');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'JULIO', 'M', 61, '1970-01-11');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'GISELE', 'F', 52, '1962-02-01');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'JORGE', 'M', 57, '1979-05-20');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'BEATRIZ', 'F', 23, '1985-10-17');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'IGOR', 'M', 65, '1986-05-13');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'CAMILA', 'F', 45, '1977-03-02');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'ANTONIO', 'M', 31, '1998-07-30');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'EDNA', 'O', 22, '1960-08-26');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'CAIO', 'M', 64, '1977-02-17');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'LETICIA', 'F', 69, '1957-11-15');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'RAIMUNDO', 'M', 65, '1952-06-18');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'URSULA', 'F', 24, '2007-08-11');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'VANIA', 'F', 51, '1971-07-26');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'PATRICIA', 'F', 62, '1985-03-16');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'BRUNO', 'M', 69, '1980-05-28');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'ROBERTO', 'M', 64, '1955-01-21');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'ALFREDO JOSUE','M',23,'2002-03-04');
INSERT INTO CLIENTE_PADRAO VALUES(NULL, 'LUCAS MORAES','O',25,'2000-11-24');


/*CRIAÇÃO DA TABELA CLIENTE ESPECIAL*/

CREATE TABLE CLIENTE_ESPECIAL(

ID_CESPECIAL INT PRIMARY KEY AUTO_INCREMENT,
NOME_CESPECIAL VARCHAR(50),
SEXO ENUM('M','F','O'),
IDADE INT,
CASHBACK INT,
ID_CLIENTE INT,

FOREIGN KEY(ID_CLIENTE) REFERENCES CLIENTE_PADRAO(ID_CPADRAO)

);

/*INSERT DA TABELA CLIENTE ESPECIAL*/
INSERT INTO CLIENTE_ESPECIAL VALUES(NULL,'ANTONIO CASTELÃO','M',24,500.00,1);
INSERT INTO CLIENTE_ESPECIAL VALUES(NULL,'DIOGO','M',21,700.00,2);
INSERT INTO CLIENTE_ESPECIAL VALUES(NULL,'FELIPE MORAES','M',21,100.00,4);
INSERT INTO CLIENTE_ESPECIAL VALUES(NULL,'NEDSON','M',21,700,10);
INSERT INTO CLIENTE_ESPECIAL VALUES(NULL,'SABRINA','F',68,200,28);
INSERT INTO CLIENTE_ESPECIAL VALUES(NULL,'LUIZ','O',64,340,37);
INSERT INTO CLIENTE_ESPECIAL VALUES(NULL,'CARLA','F',71,90,46);




/*TESTE PARA VERIFICAR SE FOI TUDO INSERIDO*/

SELECT * FROM CLIENTE_PADRAO;


/*TESTE PARA VERIFICAR SE ESTA TUDO OK*/

SELECT * FROM CLIENTE_ESPECIAL;




/*CRIAÇÃO DA TABLEA FUNCIONARIOS*/

CREATE TABLE FUNCIONARIO(

ID_FUNCIONARIO INT PRIMARY KEY AUTO_INCREMENT,
NOME VARCHAR(50) NOT NULL,
IDADE INT,
NASCIMENTO DATE,
SEXO ENUM('M','F','O'),
CARGO ENUM('CEO','FINANCEIRO','VENDEDOR','ATENDENTE DE SUPORTE AO CLIENTE','GERENTE DE OPERAÇÕES') NOT NULL,
SALARIO INT

);

/*INSERT DA TABELA FUNCIONARIO*/

INSERT INTO FUNCIONARIO VALUES(NULL, 'VIVIANE', 59, '1964-01-08','F', 'CEO', 22127);
INSERT INTO FUNCIONARIO VALUES(NULL, 'ALAN', 49, '1991-08-21', 'M', 'FINANCEIRO', 5367);
INSERT INTO FUNCIONARIO VALUES(NULL, 'WANDA', 45, '1961-03-25', 'F', 'VENDEDOR', 4476);
INSERT INTO FUNCIONARIO VALUES(NULL, 'WILLIAM', 50, '1973-03-08', 'M', 'VENDEDOR', 6986);
INSERT INTO FUNCIONARIO VALUES(NULL, 'KELLY', 36, '1981-12-13', 'F', 'VENDEDOR', 6601);
INSERT INTO FUNCIONARIO VALUES(NULL, 'PAULO', 24, '2003-08-18', 'M', 'ATENDENTE DE SUPORTE AO CLIENTE', 2905);
INSERT INTO FUNCIONARIO VALUES(NULL, 'DEBORA', 41, '2006-06-03', 'F', 'ATENDENTE DE SUPORTE AO CLIENTE', 5049);
INSERT INTO FUNCIONARIO VALUES(NULL, 'RICARDO', 41, '2002-03-29', 'M', 'GERENTE DE OPERAÇÕES', 5295);
INSERT INTO FUNCIONARIO VALUES(NULL, 'LARISSA', 52, '1967-03-24', 'F', 'FINANCEIRO', 4493);
INSERT INTO FUNCIONARIO VALUES(NULL, 'GABRIEL', 44, '2002-09-04', 'M', 'GERENTE DE OPERAÇÕES', 2760);

//


/*CRIAÇO DA TABELA VENDAS*/

CREATE TABLE VENDA (

ID_VENDA INT PRIMARY KEY AUTO_INCREMENT,
DATA_VENDA DATE,
ID_VENDEDOR INT,
NOME_FUNCIONARIO VARCHAR(50),
ID_CLIENTE INT,
NOME_CLIENTE VARCHAR(50),
FOREIGN KEY(ID_VENDEDOR) REFERENCES FUNCIONARIO(ID_FUNCIONARIO),
FOREIGN KEY(ID_CLIENTE) REFERENCES CLIENTE_PADRAO(ID_CPADRAO)


);

/*CRIAÇÃO DA TABELA PRODUTO*/
CREATE TABLE PRODUTO(

IDPRODUTO INT PRIMARY KEY AUTO_INCREMENT, 
NOME_PRODUTO VARCHAR(50),
QUANTIDADE_PRODUTO INT,
DESCRICAO_PRODUTO VARCHAR(100),
VALOR_PRODUTO FLOAT(10,2)
);

/*INSERÇÕES DA TABELA PRODUTO*/
INSERT INTO PRODUTO VALUES (NULL, 'Mouse Gamer', 44, 'Alta performance para jogos', 409.95);
INSERT INTO PRODUTO VALUES (NULL, 'Teclado Mecânico', 63, 'Ideal para digitação e jogos', 276.99);
INSERT INTO PRODUTO VALUES (NULL, 'Monitor LED 24"', 32, 'Imagem Full HD nítida', 1643.77);
INSERT INTO PRODUTO VALUES (NULL, 'Notebook i5', 41, 'Equipamento leve e rápido', 2064.47);
INSERT INTO PRODUTO VALUES (NULL, 'Smartphone Android', 61, 'Sistema atualizado com boa câmera', 2195.61);
INSERT INTO PRODUTO VALUES (NULL, 'Carregador USB-C', 57, 'Compatível com diversos modelos', 87.66);
INSERT INTO PRODUTO VALUES (NULL, 'Caixa de Som Bluetooth', 94, 'Som potente e portátil', 380.96);
INSERT INTO PRODUTO VALUES (NULL, 'HD Externo 1TB', 15, 'Armazene seus dados com segurança', 316.31);
INSERT INTO PRODUTO VALUES (NULL, 'SSD 512GB', 37, 'Alta velocidade de leitura', 437.12);
INSERT INTO PRODUTO VALUES (NULL, 'Fone de Ouvido', 91, 'Confortável e potente', 189.94);
INSERT INTO PRODUTO VALUES (NULL, 'Webcam Full HD', 22, 'Imagem clara para videochamadas', 272.42);
INSERT INTO PRODUTO VALUES (NULL, 'Cabo HDMI 2.0', 78, 'Transmissão em alta resolução', 86.11);
INSERT INTO PRODUTO VALUES (NULL, 'Placa de Vídeo', 40, 'Desempenho gráfico avançado', 2439.73);
INSERT INTO PRODUTO VALUES (NULL, 'Fonte 600W', 95, 'Energia estável e eficiente', 378.49);
INSERT INTO PRODUTO VALUES (NULL, 'Memória RAM 8GB', 46, 'Velocidade e estabilidade', 286.55);
INSERT INTO PRODUTO VALUES (NULL, 'Hub USB 3.0', 73, 'Expanda suas conexões USB', 129.37);
INSERT INTO PRODUTO VALUES (NULL, 'Tablet 10"', 52, 'Ideal para estudos e vídeos', 781.23);
INSERT INTO PRODUTO VALUES (NULL, 'Controle Bluetooth', 38, 'Conexão rápida e sem fio', 239.98);
INSERT INTO PRODUTO VALUES (NULL, 'Microfone Condensador', 17, 'Captação de áudio profissional', 312.84);
INSERT INTO PRODUTO VALUES (NULL, 'Roteador Wi-Fi 5', 29, 'Sinal forte e estável', 258.64);

/*CRIAÇÃO DA TABELA ONDE VÃO CONTER AS INFORMAÇÕES DOS PRODUTOS VENDIDOS*/
CREATE TABLE ITEM_VENDA (
    ID_ITEM INT PRIMARY KEY AUTO_INCREMENT,
    ID_VENDA INT,
    ID_PRODUTO INT,
	NOME_PRODUTO_VENDIDO VARCHAR(50),
    QUANTIDADE INT,
    VALOR_UNITARIO DECIMAL(10,2),
	VALOR_TOTAL DECIMAL(10,2),
    FOREIGN KEY(ID_VENDA) REFERENCES VENDA(ID_VENDA),
    FOREIGN KEY(ID_PRODUTO) REFERENCES PRODUTO(IDPRODUTO)
);



/*CRIANDO VIEWS*/

/*RELATORIO DOS CLIENTES ESPECIAIS ORDENADOS POR SEXO*/
CREATE VIEW R_CLIENTE_ESPECIAL AS 

SELECT P.NOME_CPADRAO AS NOME_CLIENTE,
       P.SEXO AS SEXO_CLIENTE,
	   P.IDADE,
	   E.CASHBACK
	   
FROM CLIENTE_PADRAO P
INNER JOIN CLIENTE_ESPECIAL E
ON E.ID_CLIENTE = P.ID_CPADRAO
ORDER BY P.SEXO ASC;
